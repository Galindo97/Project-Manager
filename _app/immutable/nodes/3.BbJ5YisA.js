import{c as G,a as i,d as _a,f as k,t as Q,s as q}from"../chunks/BPUFb_mI.js";import{o as ua}from"../chunks/BZIWUiMP.js";import{f as y,p as ma,M as j,a5 as ha,N as m,w as n,v as me,I as s,g as fa,i as a,x as h,r as e,ah as he}from"../chunks/Cxs6_Da5.js";import{i as Z}from"../chunks/Bv05hcF2.js";import{I as J,s as X,r as ba,e as $a,f as Be}from"../chunks/D34v4-Dx.js";import{c as E}from"../chunks/CQStMDUe.js";import{B as ga,C as ya,t as fe,f as qe,s as ka,a as wa}from"../chunks/iiDGZMtV.js";import{b as xa}from"../chunks/Cwvagt3j.js";import{g as He}from"../chunks/Cb2B2eVS.js";import{S as We,A as Aa,a as Ca,b as za,c as Ta,d as Ma,e as Pa,f as Ea,R as Da,C as La}from"../chunks/BXpDimPN.js";import"../chunks/33NwUyeK.js";import{l as Y,s as ee}from"../chunks/CPoXIpK2.js";import{C as Oe}from"../chunks/D8tM2hHp.js";import{E as Na}from"../chunks/gdLAxJIJ.js";import{T as Ia}from"../chunks/Cm-ZPPP-.js";function Sa(d,p){const v=Y(p,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"}],["circle",{cx:"12",cy:"8",r:"6"}]];J(d,ee({name:"award"},()=>v,{get iconNode(){return f},children:(u,T)=>{var c=G(),b=y(c);X(b,p,"default",{}),i(u,c)},$$slots:{default:!0}}))}function je(d,p){const v=Y(p,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M5.8 11.3 2 22l10.7-3.79"}],["path",{d:"M4 3h.01"}],["path",{d:"M22 8h.01"}],["path",{d:"M15 2h.01"}],["path",{d:"M22 20h.01"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z"}]];J(d,ee({name:"party-popper"},()=>v,{get iconNode(){return f},children:(u,T)=>{var c=G(),b=y(c);X(b,p,"default",{}),i(u,c)},$$slots:{default:!0}}))}function Ra(d,p){const v=Y(p,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];J(d,ee({name:"rotate-ccw"},()=>v,{get iconNode(){return f},children:(u,T)=>{var c=G(),b=y(c);X(b,p,"default",{}),i(u,c)},$$slots:{default:!0}}))}function Ba(d,p){const v=Y(p,["children","$$slots","$$events","$$legacy"]);const f=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18"}],["path",{d:"M4 22h16"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6"}]];J(d,ee({name:"trophy"},()=>v,{get iconNode(){return f},children:(u,T)=>{var c=G(),b=y(c);X(b,p,"default",{}),i(u,c)},$$slots:{default:!0}}))}function qa(d){return--d*d*d*d*d+1}var Ha=k('<button class="clear-search svelte-1a3nbpe" aria-label="Limpiar bÃºsqueda"><!></button>'),Wa=k('<div class="empty-state svelte-1a3nbpe"><!> <h2 class="svelte-1a3nbpe">AÃºn no hay tareas completadas</h2> <p class="svelte-1a3nbpe">Las tareas que completes aparecerÃ¡n aquÃ­</p> <a href="/tasklist" class="btn-primary svelte-1a3nbpe">Ir a Tareas</a></div>'),Oa=k('<div class="empty-state svelte-1a3nbpe"><!> <h2 class="svelte-1a3nbpe">No se encontraron tareas</h2> <p class="svelte-1a3nbpe">Intenta con otros tÃ©rminos de bÃºsqueda</p></div>'),ja=k('<span class="badge deadline svelte-1a3nbpe"><!> </span>'),Ga=k('<div role="button" tabindex="0"><div class="task-header svelte-1a3nbpe"><div class="task-check svelte-1a3nbpe"><!></div> <div class="task-info svelte-1a3nbpe"><h3 class="task-title svelte-1a3nbpe"> </h3> <div class="task-meta svelte-1a3nbpe"><span> </span> <span class="badge category svelte-1a3nbpe"> </span> <!></div></div> <div class="view-indicator svelte-1a3nbpe"><!></div></div> <div class="task-actions svelte-1a3nbpe"><button class="action-btn restore-btn svelte-1a3nbpe" title="Restaurar tarea"><!> <span>Restaurar</span></button> <button class="action-btn delete-btn svelte-1a3nbpe" title="Eliminar permanentemente"><!></button></div></div>'),Ua=k('<div class="tasks-grid svelte-1a3nbpe"></div>'),Va=k("<!> <!>",1),Fa=k("<!> <!>",1),Ka=k("<!> <!>",1),Qa=k('<div class="completed-container svelte-1a3nbpe" role="application"><div class="content-wrapper svelte-1a3nbpe"><header class="header svelte-1a3nbpe"><div class="header-content svelte-1a3nbpe"><div class="title-section svelte-1a3nbpe"><div class="title-with-icon svelte-1a3nbpe"><!> <h1 class="svelte-1a3nbpe">Tareas Completadas</h1></div> <p class="subtitle svelte-1a3nbpe">Â¡Celebra tus logros! ğŸ‰</p></div></div> <div class="stats-grid svelte-1a3nbpe"><div class="stat-card svelte-1a3nbpe"><div class="stat-icon svelte-1a3nbpe"><!></div> <div class="stat-content svelte-1a3nbpe"><span class="stat-value svelte-1a3nbpe"> </span> <span class="stat-label svelte-1a3nbpe">Total Completadas</span></div></div> <div class="stat-card svelte-1a3nbpe"><div class="stat-icon award svelte-1a3nbpe"><!></div> <div class="stat-content svelte-1a3nbpe"><span class="stat-value svelte-1a3nbpe"> </span> <span class="stat-label svelte-1a3nbpe">Esta Semana</span></div></div> <div class="stat-card svelte-1a3nbpe"><div class="stat-icon party svelte-1a3nbpe"><!></div> <div class="stat-content svelte-1a3nbpe"><span class="stat-value svelte-1a3nbpe"> </span> <span class="stat-label svelte-1a3nbpe">Tasa de Ã‰xito</span></div></div></div></header> <div class="search-container svelte-1a3nbpe"><div class="search-wrapper svelte-1a3nbpe"><!> <input type="text" class="search-input svelte-1a3nbpe" placeholder="Buscar tareas completadas por tÃ­tulo o categorÃ­a..."/> <!></div></div> <main class="main-content svelte-1a3nbpe"><!></main></div></div> <!> <button class="floating-ai-btn svelte-1a3nbpe" aria-label="Abrir AI Assistant"><!></button> <!>',1);function ct(d,p){ma(p,!0);let v=j(ha([]));const f="http://localhost:8000";let u=j(null),T=j(!1),c=j(!1),b=j(!1),D=j(""),be=he(()=>s(v).length),Ge=he(()=>s(v).filter(t=>!0).length),$e=he(()=>s(v).filter(t=>s(D)===""||t.title.toLowerCase().includes(s(D).toLowerCase())||t.category&&t.category.toLowerCase().includes(s(D).toLowerCase())));async function ae(){const t=localStorage.getItem("access_token"),r=await fetch(`${f}/tasks/completed`,{headers:{Authorization:t?`Bearer ${t}`:"","Content-Type":"application/json"}});if(!r.ok){console.error("Error al obtener tareas completadas:",await r.text()),m(v,[],!0);return}const o=await r.json();console.log("TAREAS RECIBIDAS DEL BACKEND:",o);function M(l){return typeof l=="boolean"?l:typeof l=="string"?l.toLowerCase()==="true"||l==="1":typeof l=="number"?l===1:!1}const L=Array.isArray(o)?o.map(l=>({...l,completed:M(l.completed)})):[];m(v,L.filter(l=>l.completed),!0)}async function Ue(t){const r=s(v).find(M=>M.id===t);if(!r)return;const o=new FormData;o.append("title",r.title),o.append("priority",r.priority),o.append("category",r.category||"General"),o.append("completed","false"),r.deadline&&o.append("deadline",r.deadline),await fetch(`${f}/tasks/${t}`,{method:"PUT",body:o}),await ae()}async function Ve(){s(u)!==null&&(await fetch(`${f}/tasks/${s(u)}`,{method:"DELETE"}),m(u,null),await ae())}function Fe(t){m(u,t,!0),m(T,!0)}function Ke(t){if(!t)return null;const[r,o,M]=t.split("-").map(Number);return new Date(r,o-1,M).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"})}ua(()=>{ae();const t=localStorage.getItem("darkMode");m(c,t==="true")});var ge=Qa(),te=y(ge),ye=a(te),se=a(ye),re=a(se),ke=a(re),we=a(ke),Qe=a(we);Ba(Qe,{size:32,strokeWidth:2.5,class:"trophy-icon"}),h(2),e(we),h(2),e(ke),e(re);var xe=n(re,2),ne=a(xe),oe=a(ne),Ze=a(oe);Oe(Ze,{size:24}),e(oe);var Ae=n(oe,2),Ce=a(Ae),Je=a(Ce,!0);e(Ce),h(2),e(Ae),e(ne);var le=n(ne,2),ie=a(le),Xe=a(ie);Sa(Xe,{size:24}),e(ie);var ze=n(ie,2),Te=a(ze),Ye=a(Te,!0);e(Te),h(2),e(ze),e(le);var Me=n(le,2),de=a(Me),ea=a(de);je(ea,{size:24}),e(de);var Pe=n(de,2),Ee=a(Pe),aa=a(Ee,!0);e(Ee),h(2),e(Pe),e(Me),e(xe),e(se);var ve=n(se,2),De=a(ve),Le=a(De);We(Le,{size:18,class:"search-icon"});var ce=n(Le,2);ba(ce);var ta=n(ce,2);{var sa=t=>{var r=Ha();r.__click=()=>m(D,"");var o=a(r);La(o,{size:16}),e(r),i(t,r)};Z(ta,t=>{s(D)&&t(sa)})}e(De),e(ve);var Ne=n(ve,2),ra=a(Ne);{var na=t=>{var r=Wa(),o=a(r);je(o,{size:64,strokeWidth:1.5}),h(6),e(r),fe(1,r,()=>qe),i(t,r)},oa=t=>{var r=G(),o=y(r);{var M=l=>{var $=Oa(),N=a($);We(N,{size:64,strokeWidth:1.5}),h(4),e($),fe(1,$,()=>qe),i(l,$)},L=l=>{var $=Ua();$a($,21,()=>s($e),N=>N.id,(N,_)=>{var P=Ga();P.__click=()=>He(`/task/${s(_).id}`),P.__keydown=z=>z.key==="Enter"&&He(`/task/${s(_).id}`);var H=a(P),W=a(H),pe=a(W);Oe(pe,{size:24,strokeWidth:2.5,class:"check-icon"}),e(W);var I=n(W,2),S=a(I),U=a(S,!0);e(S);var F=n(S,2),g=a(F),R=a(g,!0);e(g);var B=n(g,2),w=a(B,!0);e(B);var x=n(B,2);{var A=z=>{var ue=ja(),Re=a(ue);wa(Re,{size:10});var ca=n(Re);e(ue),me(pa=>q(ca,` ${pa??""}`),[()=>Ke(s(_).deadline)]),i(z,ue)};Z(x,z=>{s(_).deadline&&z(A)})}e(F),e(I);var O=n(I,2),C=a(O);Na(C,{size:18}),e(O),e(H);var Se=n(H,2),K=a(Se);K.__click=z=>{z.stopPropagation(),Ue(s(_).id)};var da=a(K);Ra(da,{size:16}),h(2),e(K);var _e=n(K,2);_e.__click=z=>{z.stopPropagation(),Fe(s(_).id)};var va=a(_e);Ia(va,{size:16}),e(_e),e(Se),e(P),me(()=>{Be(P,1,`completed-task-card priority-${s(_).priority??""}`,"svelte-1a3nbpe"),q(U,s(_).title),Be(g,1,`badge priority-${s(_).priority??""}`,"svelte-1a3nbpe"),q(R,s(_).priority),q(w,s(_).category||"General")}),fe(3,P,()=>ka,()=>({duration:300,easing:qa})),i(N,P)}),e($),i(l,$)};Z(o,l=>{s($e).length===0?l(M):l(L,!1)},!0)}i(t,r)};Z(ra,t=>{s(v).length===0?t(na):t(oa,!1)})}e(Ne),e(ye),e(te);var Ie=n(te,2);E(Ie,()=>Da,(t,r)=>{r(t,{get open(){return s(T)},set open(o){m(T,o,!0)},children:(o,M)=>{var L=G(),l=y(L);E(l,()=>Aa,($,N)=>{N($,{children:(_,P)=>{var H=Ka(),W=y(H);E(W,()=>Ca,(I,S)=>{S(I,{children:(U,F)=>{var g=Va(),R=y(g);E(R,()=>za,(w,x)=>{x(w,{children:(A,O)=>{h();var C=Q("Â¿Eliminar permanentemente?");i(A,C)},$$slots:{default:!0}})});var B=n(R,2);E(B,()=>Ta,(w,x)=>{x(w,{children:(A,O)=>{h();var C=Q("Esta acciÃ³n no se puede deshacer. La tarea serÃ¡ eliminada de forma permanente.");i(A,C)},$$slots:{default:!0}})}),i(U,g)},$$slots:{default:!0}})});var pe=n(W,2);E(pe,()=>Ma,(I,S)=>{S(I,{children:(U,F)=>{var g=Fa(),R=y(g);E(R,()=>Pa,(w,x)=>{x(w,{children:(A,O)=>{h();var C=Q("Cancelar");i(A,C)},$$slots:{default:!0}})});var B=n(R,2);E(B,()=>Ea,(w,x)=>{x(w,{onclick:()=>{Ve(),m(T,!1)},children:(A,O)=>{h();var C=Q("Eliminar");i(A,C)},$$slots:{default:!0}})}),i(U,g)},$$slots:{default:!0}})}),i(_,H)},$$slots:{default:!0}})}),i(o,L)},$$slots:{default:!0}})});var V=n(Ie,2);V.__click=()=>m(b,!0);var la=a(V);ga(la,{size:24}),e(V);var ia=n(V,2);ya(ia,{get darkMode(){return s(c)},get isOpen(){return s(b)},set isOpen(t){m(b,t,!0)}}),me(()=>{q(Je,s(be)),q(Ye,s(Ge)),q(aa,s(be)>0?"100%":"0%")}),xa(ce,()=>s(D),t=>m(D,t)),i(d,ge),fa()}_a(["click","keydown"]);export{ct as component};
