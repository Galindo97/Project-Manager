import{p as be,c as X,a as t,f,d as ye,t as M}from"../chunks/BPUFb_mI.js";import{o as $e}from"../chunks/BZIWUiMP.js";import{p as Z,f as w,g as ee,I as o,ah as xe,i as m,n as je,r as g,M as S,a5 as Pe,w as u,x as k,N as a,v as we}from"../chunks/Cxs6_Da5.js";import{i as Y}from"../chunks/Bv05hcF2.js";import{c as y}from"../chunks/CQStMDUe.js";import{P as De}from"../chunks/hX8rcRLy.js";import"../chunks/Ch2tKI4K.js";import{I as ie}from"../chunks/Cwvagt3j.js";import{L as ne,a as le}from"../chunks/S1mN0b8s.js";import{D as Ee,a as Se,b as ke,c as Le,d as Ce,R as Ie}from"../chunks/B9uVPNGx.js";import{p as O,r as de,s as Ne}from"../chunks/CPoXIpK2.js";import{s as ce}from"../chunks/DEOuqFRv.js";import{a as Te}from"../chunks/D34v4-Dx.js";import{D as Re}from"../chunks/CFJo3Mrj.js";import{c as qe,b as V,m as Be}from"../chunks/B-vRARWt.js";import{P as Me}from"../chunks/CcVjobh8.js";var Oe=f("<button><!></button>");function We(L,r){const i=be();Z(r,!0);let $=O(r,"id",19,()=>qe(i)),l=O(r,"ref",15,null),x=O(r,"disabled",3,!1),v=de(r,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const _=Re.create({id:V(()=>$()),ref:V(()=>l(),s=>l(s)),disabled:V(()=>!!x())}),D=xe(()=>Be(v,_.props));var R=X(),W=w(R);{var A=s=>{var p=X(),I=w(p);ce(I,()=>r.child,()=>({props:o(D)})),t(s,p)},C=s=>{var p=Oe();Te(p,()=>({...o(D)}));var I=m(p);ce(I,()=>r.children??je),g(p),t(s,p)};Y(W,s=>{r.child?s(A):s(C,!1)})}t(L,R),ee()}function Ae(L,r){Z(r,!0);let i=O(r,"ref",15,null),$=de(r,["$$slots","$$events","$$legacy","ref"]);var l=X(),x=w(l);y(x,()=>We,(v,_)=>{_(v,Ne({"data-slot":"dialog-trigger"},()=>$,{get ref(){return i()},set ref(D){i(D)}}))}),t(L,l),ee()}var Ge=f('<button class="project-new-btn svelte-1xfv7j3"><!> Nuevo Proyecto</button>'),Je=f("<!> <!>",1),ze=f("<!> <span>Creando...</span>",1),Fe=f("<span>Crear Proyecto</span>"),He=f('<button type="submit" class="dialog-submit-btn svelte-1xfv7j3"><!></button>'),Ke=f('<!> <div class="grid gap-4 py-4"><div class="grid gap-2"><!> <!></div> <div class="grid gap-2"><!> <!></div></div> <!>',1),Qe=f("<!> <!>",1),Ue=f('<div class="flex h-40 items-center justify-center"><!></div>'),Ve=f('<div class="proyectos-page svelte-1xfv7j3"><div class="flex items-center justify-between mb-8 svelte-1xfv7j3"><div class="space-y-1 svelte-1xfv7j3"><h2 class="text-3xl font-bold bg-linear-to-r from-[#ff7b54] to-[#ffb26b] bg-clip-text text-transparent svelte-1xfv7j3">Proyectos</h2> <p class="text-sm text-[#94a3b8]">Gestiona tus proyectos activos.</p></div> <!></div> <!></div>');function ut(L,r){Z(r,!0);let i=S(Pe([])),$=S(!0),l=S(!1),x=S(!1),v=S(""),_=S("");async function D(){a($,!0);try{const e=await fetch("http://127.0.0.1:8000/projects");if(!e.ok)throw new Error("Error al obtener proyectos");a(i,await e.json(),!0)}catch(e){console.error("Error cargando proyectos:",e)}finally{a($,!1)}}async function R(){if(o(v).trim()){a(l,!0);try{const e=await fetch("http://127.0.0.1:8000/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o(v),description:o(_)})});if(e.ok){const c=await e.json();a(i,[...o(i),c],!0),a(v,""),a(_,""),a(x,!1)}}catch(e){console.error("Error creating project:",e)}finally{a(l,!1)}}}async function W(e){if(confirm("¿Seguro que quieres eliminar este proyecto?"))try{(await fetch(`http://127.0.0.1:8000/projects/${e}`,{method:"DELETE"})).ok&&a(i,o(i).filter(j=>j.id!==e),!0)}catch(c){console.error("Error deleting project:",c)}}function A(e){console.log("Selected",e)}$e(()=>{D()});var C=Ve(),s=m(C),p=u(m(s),2);y(p,()=>Ie,(e,c)=>{c(e,{get open(){return o(x)},set open(j){a(x,j,!0)},children:(j,Xe)=>{var te=Qe(),re=w(te);y(re,()=>Ae,(G,J)=>{J(G,{children:(z,ue)=>{var E=Ge(),q=m(E);Me(q,{class:"mr-2 h-4 w-4"}),k(),g(E),t(z,E)},$$slots:{default:!0}})});var pe=u(re,2);y(pe,()=>Ee,(G,J)=>{J(G,{class:"sm:max-w-[425px]",children:(z,ue)=>{var E=Ke(),q=w(E);y(q,()=>Se,(n,N)=>{N(n,{children:(P,he)=>{var h=Je(),B=w(h);y(B,()=>ke,(T,d)=>{d(T,{children:(b,Q)=>{k();var U=M("Crear Proyecto");t(b,U)},$$slots:{default:!0}})});var K=u(B,2);y(K,()=>Le,(T,d)=>{d(T,{children:(b,Q)=>{k();var U=M("Añade un nuevo proyecto a tu espacio de trabajo.");t(b,U)},$$slots:{default:!0}})}),t(P,h)},$$slots:{default:!0}})});var F=u(q,2),H=m(F),oe=m(H);ne(oe,{for:"name",children:(n,N)=>{k();var P=M("Nombre");t(n,P)},$$slots:{default:!0}});var me=u(oe,2);ie(me,{id:"name",placeholder:"Ej. Rediseño Web",get value(){return o(v)},set value(n){a(v,n,!0)}}),g(H);var ae=u(H,2),se=m(ae);ne(se,{for:"description",children:(n,N)=>{k();var P=M("Descripción");t(n,P)},$$slots:{default:!0}});var ge=u(se,2);ie(ge,{id:"description",placeholder:"Breve descripción...",get value(){return o(_)},set value(n){a(_,n,!0)}}),g(ae),g(F);var _e=u(F,2);y(_e,()=>Ce,(n,N)=>{N(n,{children:(P,he)=>{var h=He();h.__click=R;var B=m(h);{var K=d=>{var b=ze(),Q=w(b);le(Q,{class:"mr-2 h-4 w-4 animate-spin"}),k(2),t(d,b)},T=d=>{var b=Fe();t(d,b)};Y(B,d=>{o(l)?d(K):d(T,!1)})}g(h),we(()=>h.disabled=o(l)),t(P,h)},$$slots:{default:!0}})}),t(z,E)},$$slots:{default:!0}})}),t(j,te)},$$slots:{default:!0}})}),g(s);var I=u(s,2);{var fe=e=>{var c=Ue(),j=m(c);le(j,{class:"h-8 w-8 animate-spin text-muted-foreground"}),g(c),t(e,c)},ve=e=>{De(e,{get projects(){return o(i)},onSelect:A,onDelete:W})};Y(I,e=>{o($)?e(fe):e(ve,!1)})}g(C),t(L,C),ee()}ye(["click"]);export{ut as component};
